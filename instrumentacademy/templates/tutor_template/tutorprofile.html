{% extends 'main_app/base.html' %}
{% load static %}
{% block page_title %}{{page_title}}{% endblock page_title %}

{% block content %}
   
</head>
    <title>User Profile</title>
    
    <style>
      
        
        .profileform h1 {
            background-color: #007bff;
            color: #fff;
            padding: 20px;
            text-align: center;
        }

    .profileform .profile-container {
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 20px auto;
            padding: 20px;
            border-radius: 5px;
        }

        .profileform p {
            margin: 10px 0;
            padding: 0;
        }
        .field-box {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
        }

        strong {
            font-weight: bold;
        }

        .profileform a {
            display: block;
            text-align: center;
            margin-top: 20px;
            text-decoration: none;
            background-color: #007bff;
            color: #fff;
            padding: 10px 20px;
            border-radius: 5px;
        }

        a:hover {
            background-color: #0056b3;
        }
    </style>
     
    <div class="container mt-5">
        <div class="row justify-content-center">
            <div class="col-md-6">
                <div class="card">
                    <div class="card-header">User Profile</div>
                    <div class="card-body">
                        <form id="user-profile-form" method="post" enctype="multipart/form-data" action="{% url 'edit_profile_tutor' %}">
                            {% csrf_token %}
                            <div class="form-group">
                                <label for="id_first_name">First Name:</label>
                                <input type="text" class="form-control" id="id_first_name" name="first_name" value="{{ user.first_name }}" readonly>
                            </div>
                            <div class="form-group">
                                <label for="id_last_name">Last Name:</label>
                                <input type="text" class="form-control" id="id_last_name" name="last_name" value="{{ user.last_name }}" readonly>
                            </div>
                            <div class="form-group">
                                <label for="id_email">Email:</label>
                                <input type="email" class="form-control" id="id_email" name="email" value="{{ user.email }}" readonly>
                            </div>
                            <div class="form-group">
                                <label>Gender:</label>
                                <p id="gender1">
                                    {% if user.userprofile.gender == 'M' %} Male{% endif %}
                                    {% if user.userprofile.gender == 'F' %} Female{% endif %}
                                    {% if user.userprofile.gender == 'O' %} Others{% endif %}
                                </p>
                                <div class="form-check">
                                    <input type="radio" id="male" name="gender" value="M" class="form-check-input" readonly {% if user.userprofile.gender == 'M' %}checked{% endif %}>
                                    <label class="form-check-label" for="male">Male</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="female" name="gender" value="F" class="form-check-input" readonly {% if user.userprofile.gender == 'F' %}checked{% endif %}>
                                    <label class="form-check-label" for="female">Female</label>
                                </div>
                                <div class="form-check">
                                    <input type="radio" id="other" name="gender" value="O" class="form-check-input" readonly {% if user.userprofile.gender == 'O' %}checked{% endif %}>
                                    <label class="form-check-label" for="other">Other</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label for="id_profile_picture">Profile Picture:</label><br>
                                <img src="{{user.userprofile.profile_picture.url}}" alt="asdas" class="img-fluid rounded-circle border border-secondary" style="max-width:120px;">
                                <input type="file" class="form-control-file" id="id_profile_picture" name="profile_picture">
                                <small class="form-text text-muted">Upload a professional profile picture.</small>
                            </div>
                            <div class="form-group">
                                <label for="id_phoneNo">Phone Number:</label>
                                <input type="text" class="form-control" id="id_phoneNo" name="phoneNo" value="{{ user.userprofile.phoneNo }}" readonly>
                            </div>
                            
                            <div class="form-group">
                                <label for="id_address">Address:</label>
                                <input type="text" class="form-control" id="id_address" name="address" value="{{ user.userprofile.address }}" readonly>
                            </div>
                            <div class="form-group">
                                <label for="id_specialist">Specialist:</label>
                                <select name="specialist" id="id_specialist" >
                                    <option value="piano">Piano</option>
                                    <option value="violin">Violin</option>
                                    <option value="guitar">Guitar</option>
                                </select>
                                {% comment %} <input type="text" class="form-control" id="id_specialist" name="specialist" value="{{ user.userprofile.specialist }}" readonly> {% endcomment %}
                            </div>
                            <div class="form-group">
                                <label for="id_description">Description:</label>
                                <textarea class="form-control" id="id_description" name="description" readonly>{{ user.userprofile.description }}</textarea>
                            </div>
                            
                           
                           
                            <!-- Qualifications -->
                            <div class="form-group">
                                <label for="id_qualifications">Qualifications:</label>
                                <textarea class="form-control" id="id_qualifications" name="qualifications" rows="4" readonly>{{ user.userprofile.qualifications }}</textarea>
                            </div>
    
                            <!-- Teaching Experience -->
                            <div class="form-group">
                                <label for="id_teaching_experience">Teaching Experience:</label>
                                <textarea class="form-control" id="id_teaching_experience" name="teaching_experience" rows="4" readonly>{{ user.userprofile.teaching_experience }}</textarea>
                            </div>
    
                            <button type="button" class="btn btn-primary" id="edit-button">Edit Profile</button>
                            <button type="button" class="btn btn-success" id="save-button" style="display: none;">Save</button>
                            <button type="button" class="btn btn-secondary" id="cancel-button" style="display: none;">Cancel</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
    

    <!-- Include Bootstrap JS and other scripts here -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
          // Initially, only the Edit button is visible
          
          $("#edit-button").show();
          $("#save-button").hide();
          $("#cancel-button").hide();
    
          // Function to toggle between Edit and View modes
          function toggleEditMode() {
            
            // Toggle readonly attribute for input fields
            $("input, textarea").prop("readonly", function (_, attr) {
              return !attr;
            });
            
    
            // Toggle visibility of buttons
            $("#edit-button").toggle();
            $("#save-button").toggle();
            $("#cancel-button").toggle();
    
            // Toggle visibility of gender options
            toggleGenderOptions();
          }
    
          // Function to toggle visibility of gender options
          function toggleGenderOptions() {
            const editMode = $("#edit-button").is(":visible");
            const selectedGender = $("input[name='gender']:checked").val();
    
            $("input[name='gender']").each(function () {
              const genderValue = $(this).data("gender");
              if (!editMode || genderValue === selectedGender) {
                $(this).closest(".form-check").show();
                $("#gender1").hide();
              } else {
                $(this).closest(".form-check").hide();
                $("#gender1").show();
              }
            });
          }
    
          // Edit button click event
          $("#edit-button").click(function () {
            toggleEditMode();
          });
    
          // Cancel button click event
          $("#cancel-button").click(function () {
            toggleEditMode();
            // Reset form to original values
            $("#user-profile-form")[0].reset();
          });
    
          // Save button click event
          $("#save-button").click(function () {
            toggleEditMode();
            // Submit the form for saving changes
            $("#user-profile-form").submit();
          });
    
          // Initial setup of gender options visibility
          toggleGenderOptions();
        });
      </script>
    
    
    {% endblock content %}